<!--
  FSD TrackDrive Mission - 高速循迹

  用法:
    roslaunch fsd_launch trackdrive.launch
    roslaunch fsd_launch trackdrive.launch simulation:=true bag:=/path/to/bag.bag
-->
<launch>
    <!-- ========== Arguments ========== -->
    <arg name="simulation" default="false" doc="仿真模式"/>
    <arg name="bag" default="" doc="Rosbag 路径（仿真模式必填）"/>
    <arg name="rate" default="1.0" doc="回放速率"/>
    <arg name="loop" default="false" doc="rosbag 是否循环播放"/>
    <arg name="launch_rviz" default="true" doc="启动 RViz"/>
    <arg name="launch_viz" default="true" doc="启动可视化节点"/>
    <arg name="rviz_mode" default="main" doc="RViz模式: main/global/pointcloud/dual"/>
    <arg name="vehicle" default="A13" doc="车辆型谱ID"/>
    <arg name="control_mode" default="4" doc="控制模式: 1(accel)/2(line)/3(skidpad)/4(track)"/>

    <include file="$(find fsd_launch)/launch/subsystems/mission_stack.launch">
        <arg name="simulation" value="$(arg simulation)"/>
        <arg name="bag" value="$(arg bag)"/>
        <arg name="rate" value="$(arg rate)"/>
        <arg name="loop" value="$(arg loop)"/>
        <arg name="launch_rviz" value="$(arg launch_rviz)"/>
        <arg name="launch_viz" value="$(arg launch_viz)"/>
        <arg name="rviz_mode" value="$(arg rviz_mode)"/>
        <arg name="rviz_config" value="high_speed"/>
        <arg name="vehicle" value="$(arg vehicle)"/>
        <arg name="perception_mode" value="track"/>
        <arg name="localization_mode" value="track"/>
        <arg name="planning_mission" value="high_speed"/>
        <arg name="control_mode_profile" value="track"/>
        <arg name="control_mode" value="$(arg control_mode)"/>
    </include>
</launch>
