# ==========================================================
# Acceleration Control Overlay (直线加速控制参数)
# ==========================================================
# 加载顺序: param.yaml → 本文件
#
# 【赛事特点】
#   - 超高速运动（15+ m/s）
#   - 主要是直线，微小转向
#   - 稳定性优先
#
# 【调参策略】
#   - 长lookahead距离（3-15m）
#   - 弱滑移角补偿（0.3）
#   - 小转向幅度限制
# ==========================================================

pp:
  # PID参数（同base）
  angle_kv: 0.0
  angle_kl: 2.5
  angle_kp: 0.9
  angle_ki: 0.0
  angle_kd: 0.0
  
  # ⭐ 最大转向角速度
  # 直线赛转向幅度小
  # 限制: 防止高速时过度转向导致失控
  # 建议范围: 0.2-0.4
  steering_delta_max: 0.3
  
  # ==========================
  # 滑移角补偿
  # ==========================
  enable_slip_compensation: true
  
  # ⭐ 直线赛侧滑补偿弱
  # 原因：直线行驶滑移角小
  # 调大:  unnecessary，可能引入噪声
  # 调小:  更稳定，适合直线
  slip_gain: 0.3
  
  # ==========================
  # Lookahead距离
  # ==========================
  # ⭐ 长前瞻距离
  # 原因：
  #   1. 超高速需要更长lookahead保持稳定性
  #   2. 提前看到终点进行减速规划
  #   3. 直线场景cut corner风险小
  min_lookahead: 3.0
  max_lookahead: 15.0

# ==========================
# 【调参指南 - Acceleration】
# ==========================
#
# 1. 如高速时车辆不稳定（蛇行）：
#    - 增大 max_lookahead (15→18)
#    - 减小 angle_kp (0.9→0.7)
#    - 确保 steering_delta_max 不过大
#
# 2. 如微调方向时响应慢：
#    - 减小 min_lookahead (3.0→2.5)
#    - 稍微增大 angle_kp (0.9→0.95)
#
# 3. 如冲出赛道（understeer）：
#    - 可能是 lookahead 过长
#    - 减小 max_lookahead (15→12)
#    - 增大 angle_kp (0.9→1.0)
#
# 4. 如终点前减速不及时：
#    - 确认 max_lookahead 足够大（看到终点）
#    - 检查 planning 模块的减速规划
#
# 【特别注意事项】
#   - 直线加速对转向精度要求极高（cm级）
#   - 建议在实际赛道进行微调
#   - 高速时 small steering_delta_max 是安全关键
#
# 【观测信号】
#   # 监控高速时的转向指令
#   rostopic echo /vehicle/cmd | grep delta
#   # 检查车辆是否直线行驶
#   rostopic echo /localization/car_state | grep yaw
#   # legacy兼容链路（默认关闭）：/vehcileCMDMsg、/Carstate
