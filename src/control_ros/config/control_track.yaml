# ==========================================================
# TrackDrive Control Overlay (高速循迹控制参数)
# ==========================================================
# 加载顺序: param.yaml → 本文件
#
# 【赛事特点】
#   - 高速运动（10-15 m/s）
#   - 直线+弯道组合
#   - 需要平衡响应速度和平稳性
#
# 【调参策略】
#   - 标准lookahead距离（2-10m）
#   - 中等滑移角补偿（0.5）
#   - 标准转向限制
# ==========================================================

pp:
  # PID参数（同base）
  angle_kv: 0.0
  angle_kl: 2.5
  angle_kp: 0.9
  angle_ki: 0.0
  angle_kd: 0.0
  
  # 最大转向角速度
  # 标准配置，平衡响应和平稳性
  steering_delta_max: 0.5
  
  # ==========================
  # 滑移角补偿
  # ==========================
  enable_slip_compensation: true
  
  # 平衡配置
  # 高速循迹需要适度补偿
  # 调大: 适合多弯道的赛道
  # 调小: 适合长直道赛道
  slip_gain: 0.5
  
  # ==========================
  # Lookahead距离
  # ==========================
  # 标准前瞻距离
  # 原因：高速循迹需要适中lookahead
  #   - 太短：可能不稳定
  #   - 太长：可能cut corner
  min_lookahead: 2.0
  max_lookahead: 10.0

# ==========================
# 【调参指南 - TrackDrive】
# ==========================
#
# 1. 如长直道时车辆蛇行：
#    - 增大 max_lookahead (10→12)
#    - 减小 angle_kp (0.9→0.8)
#
# 2. 如连续弯道时偏离路径：
#    - 减小 max_lookahead (10→8)
#    - 增大 slip_gain (0.5→0.6)
#
# 3. 如进入弯道时转向不及时：
#    - 增大 angle_kp (0.9→1.0)
#    - 减小 min_lookahead (2.0→1.8)
#
# 4. 如高速时转向过冲：
#    - 减小 angle_kp (0.9→0.8)
#    - 增大 steering_delta_max (0.5→0.6)
#
# 【观测信号】
#   # 检查控制指令平滑度
#   rostopic echo /vehcileCMDMsg | grep delta
#   # 检查跟踪误差
#   # RViz中对比实际路径和规划路径
